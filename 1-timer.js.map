{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nconst input = document.querySelector(`#datetime-picker`);\nlet userSelectedDate = null;\nconst startButton = document.querySelector(\"button[data-start]\")\nstartButton.disabled = true;\nlet timeInterval;\n\n\n\nfunction updateStartButtonState(isEnabled) {\n    startButton.disabled = !isEnabled;\n  }\n\n  function convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n\n \n  \n  console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n  console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n  console.log(convertMs(24140000)); // {days: 0, hours: Ð±, minutes: 42, seconds: 20}\n  \n  flatpickr(`#datetime-picker`, {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      const selectedDate = selectedDates[0]; \n  \n      if (selectedDate.getTime() <= new Date().getTime()) {\n        window.alert(\"Please choose a date in the future\");\n        userSelectedDate = null; \n        updateStartButtonState(false); \n      } else {\n        userSelectedDate = selectedDate;\n        updateStartButtonState(true); \n      }\n  \n      console.log(selectedDate);\n\n    },\n  });\n  \n  \n  function updateTimerUI({ days, hours, minutes, seconds }) {\n    document.querySelector(\"[data-days]\").textContent = String(days).padStart(2, \"0\");\n    document.querySelector(\"[data-hours]\").textContent = String(hours).padStart(2, \"0\");\n    document.querySelector(\"[data-minutes]\").textContent = String(minutes).padStart(2, \"0\");\n    document.querySelector(\"[data-seconds]\").textContent = String(seconds).padStart(2, \"0\");\n  }\n \n\nfunction startTimer() {\n if(!userSelectedDate) \n  return;\n  input.disabled = true;\n  startButton.disabled = true;\n\n  timeInterval = setInterval(() => {\n    const currentTime = new Date();\n    const timeDifference = userSelectedDate.getTime() - currentTime.getTime();\n\n    if(timeDifference <= 0) {\n      clearInterval(timeInterval);\n      updateTimerUI({days: 0, hours: 0, minutes: 0, seconds: 0});\n      input.disabled = false;\n      return;\n    }\n\n    const timeLeft = convertMs(timeDifference);\n     updateTimerUI(timeLeft);\n    \n\n  }, 1000);\n\n  \n}\n\nstartButton.addEventListener(\"click\", startTimer);"],"names":["input","userSelectedDate","startButton","timeInterval","updateStartButtonState","isEnabled","convertMs","ms","days","hours","minutes","seconds","flatpickr","selectedDates","selectedDate","updateTimerUI","startTimer","currentTime","timeDifference","timeLeft"],"mappings":"wIAGA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACvD,IAAIC,EAAmB,KACvB,MAAMC,EAAc,SAAS,cAAc,oBAAoB,EAC/DA,EAAY,SAAW,GACvB,IAAIC,EAIJ,SAASC,EAAuBC,EAAW,CACvCH,EAAY,SAAW,CAACG,CACzB,CAED,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAID,QAAQ,IAAIL,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC,EAE/BM,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAEhCC,EAAa,QAAS,GAAI,IAAI,KAAM,EAAC,QAAO,GAC9C,OAAO,MAAM,oCAAoC,EACjDb,EAAmB,KACnBG,EAAuB,EAAK,IAE5BH,EAAmBa,EACnBV,EAAuB,EAAI,GAG7B,QAAQ,IAAIU,CAAY,CAEzB,CACL,CAAG,EAGD,SAASC,EAAc,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACxD,SAAS,cAAc,aAAa,EAAE,YAAc,OAAOH,CAAI,EAAE,SAAS,EAAG,GAAG,EAChF,SAAS,cAAc,cAAc,EAAE,YAAc,OAAOC,CAAK,EAAE,SAAS,EAAG,GAAG,EAClF,SAAS,cAAc,gBAAgB,EAAE,YAAc,OAAOC,CAAO,EAAE,SAAS,EAAG,GAAG,EACtF,SAAS,cAAc,gBAAgB,EAAE,YAAc,OAAOC,CAAO,EAAE,SAAS,EAAG,GAAG,CACvF,CAGH,SAASK,GAAa,CACjBf,IAEHD,EAAM,SAAW,GACjBE,EAAY,SAAW,GAEvBC,EAAe,YAAY,IAAM,CAC/B,MAAMc,EAAc,IAAI,KAClBC,EAAiBjB,EAAiB,QAAS,EAAGgB,EAAY,QAAO,EAEvE,GAAGC,GAAkB,EAAG,CACtB,cAAcf,CAAY,EAC1BY,EAAc,CAAC,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAC,EACzDf,EAAM,SAAW,GACjB,MACD,CAED,MAAMmB,EAAWb,EAAUY,CAAc,EACxCH,EAAcI,CAAQ,CAGxB,EAAE,GAAI,EAGT,CAEAjB,EAAY,iBAAiB,QAASc,CAAU"}